function startLoading(n){kendo.ui.progress($(n),!0);var t=$(n).height();t=t/2+$(n).offset().top;t=t-$(window).height()/2;window.scrollTo(0,t)}function stopLoading(n){kendo.ui.progress($(n),!1)}function createResourceGrid(){var t=$("#resourceGrid").data("readResourcesUrl"),i=$("#resourceGrid").data("readClassesUrl"),n=new kendo.data.DataSource({transport:{read:{type:"GET",dataType:"json",url:i,cache:!1}}}),r=$("#resourceGrid").kendoGrid({dataSource:{transport:{read:{type:"GET",dataType:"json",url:t,cache:!1}},schema:{model:{id:"ResourceId",fields:{ResourceId:{},ResourceName:{validation:{required:!0}},YearDesignated:{},ResourceType:{},DesignatedStatus:{},ModifiedDate:{editable:!1},GISId:{type:"number",validation:{noDuplicates:function(n){var i=$("#resourceGrid").data("kendoGrid").dataSource.data(),u=this,r=!0,t;if(n.is("[name=GISId]")&&n.val()!=="")for(n.attr("data-noduplicates-msg","Duplicate GIS IDs are not allowed."),t=0;t<i.length&&r;)i[t].GISID!=n.val()||n.val()==0||i[t].dirty||i[t].ProjectID==n[0].kendoBindingTarget.source.ProjectID||(r=!1),t+=1;return r}}}}}},requestStart:function(){startLoading("#allcontent")}},columns:[{field:"ResourceId",title:"Resource ID",hidden:!0},{field:"ResourceName",title:"Resource Name",sortable:!0,filterable:{extra:!1,operators:{string:{contains:"Contains",isempty:"Empty"}}}},{field:"YearDesignated",title:"Year Designated"},{field:"ResourceTypeName",title:"Resource Type",sortable:!0},{field:"DesignationStatusName",title:"Designation Status",sortable:!0},{field:"GISId",title:"GIS ID",format:"{0:n0}",sortable:!0,editable:function(){return $("#userName").data("admin")==="True"}},{field:"ModifiedDate",title:"Modified",template:function(n){return n.ModifiedDate==null||n.ModifiedDate==""?"":new Date(n.ModifiedDate).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"})},editable:!1,width:90},],toolbar:[{template:kendo.template($("#toolBarTemplateWrite").html())}],autoBind:!1,filterable:!0,scrollable:!1,sortable:!0,dataBound:onDataBound,detailTemplate:kendo.template($("#resourcedetailtemplate").html()),detailInit:function(t){var u=t.data.id,i=t.data.ResourceId.toString().trim().toLowerCase(),r=t.detailRow;r.find(".resourcedesc")[0].id="resourcedesc"+i;r.find(".resourceclasslist")[0].id="resourceclasslist"+i;r.find(".primarysite")[0].id="primarysite"+i;i!==null&&i!==""&&($("#resourcedesc"+i).val(t.data.ResourceDescription),$("#resourceclasslist"+i).val(t.data.ResourceClassName),$("#primarysite"+i).val(t.data.PrimaryASMSite));r.find(".resourcetabstrip")[0].id="resourcetabstrip"+i;$("#resourcetabstrip"+i).kendoTabStrip({dataTextField:"Name"});r.find(".resourceclasslist").kendoDropDownList({dataSource:n,dataTextField:"Name",dataValueField:"Id",value:t.data.ResourceClassId,enable:!0,select:function(n){n.dataItem.Active||(removeFromDropDown("#resourceclasslist"+i,n.dataItem.Id),n.preventDefault())},dataBound:function(){removeFromDropDown("#resourceclasslist"+i)},template:kendo.template($("#dropDownTemplate").html())})},edit:function(n){n.sender.expandRow(n.container);var i=n.model.ResourceId.toString().trim().toLowerCase(),t=$("#resourcetabstrip"+i).data("kendoTabStrip");t.select(0);t.disable(t.tabGroup.children().eq(1));t.disable(t.tabGroup.children().eq(2));t.disable(t.tabGroup.children().eq(3));$("#resourceclasslist"+i).data("kendoDropDownList").enable(!0);$("tr[data-uid='"+n.model.uid+"'] .k-hierarchy-cell").html("")}}),u=r.data("kendoGrid").dataSource;alert("hit read...");n.read();u.read()}function toggleEditAgencies(n){setTimeout(function(){for(var i,r=$("input[type='radio'][name='"+n+"']"),t=0;t<r.length;t++)r[t].disabled=!1;for(i=$('button[name="'+n+'"]'),t=0;t<i.length;t++)i[t].disabled=!1},800)}function onDataBound(n){var t=n.sender,i=getParameterByName("resourceId")}function getParameterByName(n){var t=RegExp("[?&]"+n+"=([^&]*)").exec(window.location.search);return t&&decodeURIComponent(t[1].replace(/\+/g," "))}function createContactDialog(){$("#contactinfo").kendoDialog({closable:!1,title:!1,visible:!1})}function setEnvironmentBanner(){var i=window.location.hostname,n="",t=!1;i.indexOf("localhost")!=-1?(n="LOCAL DEV",t=!0):i.indexOf("DEV-SERVER-HOSTNAME")!=-1?(n="DEV",t=!0):i.indexOf("TEST-SERVER-HOSTNAME")!=-1&&(n="TEST",t=!0);t&&($("#environmentDescriptorWrapper").removeClass("hidebanner"),$("#environmentDescriptor").text(n))}$(document).ready(function(){setEnvironmentBanner();$(document).ajaxStart(function(){startLoading("#allcontent")});$(document).ajaxStop(function(){stopLoading("#allcontent")})});$(document).ready(function(){createResourceGrid()}),function(n,t,i,r,u,f,e){n.GoogleAnalyticsObject=u;n[u]=n[u]||function(){(n[u].q=n[u].q||[]).push(arguments)};n[u].l=1*new Date;f=t.createElement(i);e=t.getElementsByTagName(i)[0];f.async=1;f.src=r;e.parentNode.insertBefore(f,e)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga");$(document).ready(function(){createContactDialog();$(".panel-collapse").on("show.bs.collapse",function(){$(this).parent().find(".glyphicons").removeClass("glyphicons-plus").addClass("glyphicons-minus")});$(".panel-collapse").on("hide.bs.collapse",function(){$(this).parent().find(".glyphicons").removeClass("glyphicons-minus").addClass("glyphicons-plus")});$(document).on("click",".contact-icon",function(){$("#contactinfo").data("kendoDialog").open()});$(document).on("click",".k-overlay",function(){$("#contactinfo").data("kendoDialog").close()});$("body").scrollspy({target:".bs-docs-sidebar",offset:40})});